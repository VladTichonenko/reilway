# –û—Ç–ø—Ä–∞–≤–∫–∞ –ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã—Ö –∫–æ–¥–æ–≤ —á–µ—Ä–µ–∑ whatsapp-web.js

## üì± –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å whatsapp-web.js –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã—Ö –∫–æ–¥–æ–≤?

**–î–∞, –º–æ–∂–Ω–æ**, –Ω–æ –µ—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è WhatsApp.

## ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è WhatsApp

### 1. –û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –Ω–æ–≤—ã–µ –Ω–æ–º–µ—Ä–∞

WhatsApp –∏–º–µ–µ—Ç –∞–Ω—Ç–∏—Å–ø–∞–º-–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:
- **–ù–æ–≤—ã–µ –Ω–æ–º–µ—Ä–∞ (–∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –ø–∏—Å–∞–ª–∏ –±–æ—Ç—É)**: –ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–º–µ—Ä –≤ –∫–æ–Ω—Ç–∞–∫—Ç—ã –∏–ª–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –ª–∏–º–∏—Ç—ã
- **–ù–æ–º–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–µ —É–∂–µ –ø–∏—Å–∞–ª–∏**: –ú–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –±–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π
- **–ú–∞—Å—Å–æ–≤–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞**: –†–∏—Å–∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∞–∫–∫–∞—É–Ω—Ç–∞ –∑–∞ —Å–ø–∞–º

### 2. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

–î–ª—è –ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã—Ö –∫–æ–¥–æ–≤ –ª—É—á—à–µ:
- ‚úÖ –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–ø—Ä–æ—Å–∏–ª –∫–æ–¥
- ‚úÖ –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –º–∞—Å—Å–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑—É–º–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –º–µ–∂–¥—É –æ—Ç–ø—Ä–∞–≤–∫–∞–º–∏

## üíª –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã—Ö –∫–æ–¥–æ–≤

```javascript
const { Client, LocalAuth } = require('whatsapp-web.js');

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞ (—É–∂–µ –µ—Å—Ç—å –≤ –≤–∞—à–µ–º index.js)
const client = new Client({
  authStrategy: new LocalAuth({
    dataPath: './.wwebjs_auth'
  })
});

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä–æ—á–Ω–æ–≥–æ –∫–æ–¥–∞
async function sendVerificationCode(phoneNumber, code) {
  try {
    // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞
    // –§–æ—Ä–º–∞—Ç: –Ω–æ–º–µ—Ä@c.us (–Ω–∞–ø—Ä–∏–º–µ—Ä: 79991234567@c.us)
    const formattedNumber = formatPhoneNumber(phoneNumber);
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ
    const message = `–í–∞—à –ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π –∫–æ–¥: ${code}\n\n–ù–µ –ø–µ—Ä–µ–¥–∞–≤–∞–π—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ —Ç—Ä–µ—Ç—å–∏–º –ª–∏—Ü–∞–º.`;
    
    await client.sendMessage(formattedNumber, message);
    
    console.log(`‚úÖ –ü—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π –∫–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ ${phoneNumber}`);
    return { success: true };
  } catch (error) {
    console.error(`‚ùå –û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–¥–∞ –Ω–∞ ${phoneNumber}:`, error);
    return { success: false, error: error.message };
  }
}

// –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–∞
function formatPhoneNumber(phoneNumber) {
  // –£–±–∏—Ä–∞–µ–º –≤—Å–µ –Ω–µ—Ü–∏—Ñ—Ä–æ–≤—ã–µ —Å–∏–º–≤–æ–ª—ã
  let cleaned = phoneNumber.replace(/\D/g, '');
  
  // –ï—Å–ª–∏ –Ω–æ–º–µ—Ä –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 8, –∑–∞–º–µ–Ω—è–µ–º –Ω–∞ 7
  if (cleaned.startsWith('8')) {
    cleaned = '7' + cleaned.substring(1);
  }
  
  // –ï—Å–ª–∏ –Ω–æ–º–µ—Ä –Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å –∫–æ–¥–∞ —Å—Ç—Ä–∞–Ω—ã, –¥–æ–±–∞–≤–ª—è–µ–º 7
  if (cleaned.length === 10) {
    cleaned = '7' + cleaned;
  }
  
  return `${cleaned}@c.us`;
}

// –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö –º–æ–¥—É–ª—è—Ö
module.exports = { sendVerificationCode, formatPhoneNumber };
```

## üîó –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–∞—à–∏–º —Å–∞–π—Ç–æ–º

### –í–∞—Ä–∏–∞–Ω—Ç 1: HTTP API (Express —Å–µ—Ä–≤–µ—Ä)

–°–æ–∑–¥–∞–π—Ç–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª `sms-service.js`:

```javascript
const express = require('express');
const router = express.Router();
const { sendVerificationCode } = require('./whatsapp-service');

// –≠–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä–æ—á–Ω–æ–≥–æ –∫–æ–¥–∞
router.post('/send-code', async (req, res) => {
  const { phoneNumber } = req.body;
  
  if (!phoneNumber) {
    return res.status(400).json({ error: '–ù–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω' });
  }
  
  // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã–π –∫–æ–¥ (4-6 —Ü–∏—Ñ—Ä)
  const code = Math.floor(100000 + Math.random() * 900000).toString();
  
  // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∫–æ–¥
  const result = await sendVerificationCode(phoneNumber, code);
  
  if (result.success) {
    // –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–æ–¥ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ —Å–µ—Å—Å–∏–∏ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
    // –ù–∞–ø—Ä–∏–º–µ—Ä, –≤ Redis –∏–ª–∏ –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏ 5-10 –º–∏–Ω—É—Ç
    res.json({ success: true, message: '–ö–æ–¥ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω' });
  } else {
    res.status(500).json({ error: '–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–¥–∞' });
  }
});

module.exports = router;
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞

–ï—Å–ª–∏ —É –≤–∞—Å —É–∂–µ –µ—Å—Ç—å –±–æ—Ç, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ—Ç –∂–µ –∫–ª–∏–µ–Ω—Ç:

```javascript
// –í –≤–∞—à–µ–º index.js –∏–ª–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ
const whatsappClient = require('./index'); // –∏–ª–∏ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ client

async function sendCode(phoneNumber, code) {
  const formattedNumber = formatPhoneNumber(phoneNumber);
  await whatsappClient.sendMessage(formattedNumber, `–í–∞—à –∫–æ–¥: ${code}`);
}
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### 1. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è WhatsApp

- **–ê–Ω—Ç–∏—Å–ø–∞–º**: WhatsApp –º–æ–∂–µ—Ç –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –∞–∫–∫–∞—É–Ω—Ç –∑–∞ –º–∞—Å—Å–æ–≤—É—é –æ—Ç–ø—Ä–∞–≤–∫—É
- **–ù–æ–≤—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã**: –ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–º–µ—Ä –≤ –∫–æ–Ω—Ç–∞–∫—Ç—ã (–Ω–æ –æ–±—ã—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –±–µ–∑ —ç—Ç–æ–≥–æ –¥–ª—è –ø–µ—Ä–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π)
- **–õ–∏–º–∏—Ç—ã**: –ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏–π –∑–∞ –∫–æ—Ä–æ—Ç–∫–æ–µ –≤—Ä–µ–º—è

### 2. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

–î–ª—è –ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã—Ö –∫–æ–¥–æ–≤ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:
- ‚úÖ **–û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π WhatsApp Business API** (Twilio, 360dialog) - –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞
- ‚úÖ **SMS API** (Twilio, Nexmo) - –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ WhatsApp
- ‚ö†Ô∏è **whatsapp-web.js** - –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–ª–∏ –º–∞–ª—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤

### 3. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –•—Ä–∞–Ω–∏—Ç–µ –∫–æ–¥—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å –≤—Ä–µ–º–µ–Ω–µ–º –∂–∏–∑–Ω–∏
- –ù–µ –ª–æ–≥–∏—Ä—É–π—Ç–µ –∫–æ–¥—ã –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS –¥–ª—è API
- –í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤

## üÜö –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å Green-API

| –ü–∞—Ä–∞–º–µ—Ç—Ä | Green-API | whatsapp-web.js |
|----------|-----------|-----------------|
| **–°—Ç–æ–∏–º–æ—Å—Ç—å** | –õ–∏–º–∏—Ç—ã –Ω–∞ —Ç–∞—Ä–∏—Ñ–∞—Ö | –ë–µ—Å–ø–ª–∞—Ç–Ω–æ |
| **–ù–æ–≤—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã** | –ü—Ä–æ–±–ª–µ–º—ã (–æ—à–∏–±–∫–∞ 466) | –ú–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å, –Ω–æ –µ—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è |
| **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å** | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç —Ç–∞—Ä–∏—Ñ–∞ | –ó–∞–≤–∏—Å–∏—Ç –æ—Ç WhatsApp |
| **–†–∏—Å–∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏** | –ù–∏–∑–∫–∏–π (–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API) | –°—Ä–µ–¥–Ω–∏–π (–Ω–µ–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ) |
| **–î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞** | ‚úÖ –î–∞ | ‚ö†Ô∏è –î–ª—è –º–∞–ª—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ |

## üìù –í—ã–≤–æ–¥

**whatsapp-web.js –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–æ—á–Ω—ã—Ö –∫–æ–¥–æ–≤**, –Ω–æ:

1. ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤
2. ‚ö†Ô∏è –ï—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è WhatsApp –Ω–∞ –Ω–æ–≤—ã–µ –∫–æ–Ω—Ç–∞–∫—Ç—ã
3. ‚ö†Ô∏è –†–∏—Å–∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –ø—Ä–∏ –º–∞—Å—Å–æ–≤–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ
4. üí° –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π API –∏–ª–∏ SMS

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ, –º–æ–≥—É –ø–æ–º–æ—á—å —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–¥–æ–≤!
